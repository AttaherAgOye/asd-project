â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  FORMAT toStr() CORRIGÃ‰ - STRUCTURE HIÃ‰RARCHIQUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CORRECTION APPLIQUÃ‰E


ğŸ“‹ ANCIEN FORMAT (INCORRECT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Format plat avec parenthÃ¨ses autour des feuilles uniquement :

(ffffff) (000000) (ffffff) (ffffff) (ffffff) (000000) (ffffff) ...

âŒ ProblÃ¨mes :
  â€¢ Impossible de voir la structure de l'arbre
  â€¢ Toutes les feuilles au mÃªme niveau
  â€¢ Pas d'indication des nÅ“uds internes


ğŸ“‹ NOUVEAU FORMAT (CORRECT - selon le sujet)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Format hiÃ©rarchique avec parenthÃ¨ses imbriquÃ©es :

(ffffff (000000 ffffff ffffff ffffff) (000000 ffffff ffffff 000000) ffffff)

âœ… Avantages :
  â€¢ Structure arborescente visible
  â€¢ ParenthÃ¨ses montrent les nÅ“uds internes
  â€¢ Feuilles sans parenthÃ¨ses supplÃ©mentaires


ğŸŒ³ EXEMPLE DÃ‰TAILLÃ‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Arbre simple 4Ã—4 :

        Racine
       /  |  \  \
      /   |   \   \
    NO   NE   SE   SO
    
NO = nÅ“ud interne avec 4 feuilles
NE = feuille blanche
SE = nÅ“ud interne avec 4 feuilles  
SO = feuille noire


Format AVANT (incorrect) :
(ffffff) (000000) (ffffff) (ffffff) (ffffff) (ffffff) (000000) (ffffff) (ffffff) (000000)

Format APRÃˆS (correct) :
((000000 ffffff ffffff ffffff) ffffff (000000 ffffff ffffff 000000) 000000)
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”” NE â”˜                                  â”” SO â”˜


ğŸ” RÃˆGLES DE FORMATAGE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. FEUILLE :
   Format : code_hex
   Exemple : ffffff
   
2. NÅ’UD INTERNE :
   Format : (fils_NO fils_NE fils_SE fils_SO)
   Exemple : (ffffff 000000 7f7f7f bfbfbf)
   
3. ORDRE DES FILS :
   Toujours : NO (Nord-Ouest), NE (Nord-Est), SE (Sud-Est), SO (Sud-Ouest)
   
4. SÃ‰PARATEUR :
   Espace entre chaque Ã©lÃ©ment


ğŸ“Š EXEMPLE AVEC L'IMAGE DU SUJET
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ligne 1 (sujet) :
(ffffff (000000 ffffff ffffff ffffff) (000000 ffffff ffffff 000000) ffffff)

DÃ©composition :
- Racine est un nÅ“ud interne : (...)
  â”œâ”€ NO : nÅ“ud interne (000000 ffffff ffffff ffffff)
  â”‚       â”œâ”€ NO : 000000
  â”‚       â”œâ”€ NE : ffffff
  â”‚       â”œâ”€ SE : ffffff
  â”‚       â””â”€ SO : ffffff
  â”œâ”€ NE : nÅ“ud interne (000000 ffffff ffffff 000000)
  â”‚       â”œâ”€ NO : 000000
  â”‚       â”œâ”€ NE : ffffff
  â”‚       â”œâ”€ SE : ffffff
  â”‚       â””â”€ SO : 000000
  â”œâ”€ SE : feuille ffffff
  â””â”€ SO : feuille ffffff (non affichÃ© car dernier)


ğŸ¯ DIFFÃ‰RENCE CLEF
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                 ANCIEN          NOUVEAU
              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Feuille       (ffffff)         ffffff
NÅ“ud interne  fils1 fils2...   (...fils...)
Structure     Plate âŒ         HiÃ©rarchique âœ…


ğŸ’» CODE MODIFIÃ‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

private void toStrRecursive(Node node, StringBuilder sb) {
    if (node == null) return;
    
    if (node.isLeaf()) {
        // âœ… Feuille : juste le code hexa (sans parenthÃ¨ses)
        sb.append(ImagePNG.colorToHex(node.color)).append(" ");
    } else {
        // âœ… NÅ“ud interne : parenthÃ¨ses autour des 4 fils
        sb.append("(");
        toStrRecursive(node.NO, sb);
        toStrRecursive(node.NE, sb);
        toStrRecursive(node.SE, sb);
        toStrRecursive(node.SO, sb);
        sb.append(") ");
    }
}


ğŸ§ª TEST
â”€â”€â”€â”€â”€â”€â”€

Pour l'image 32-tux.png :

AVANT :
(ffffff) (ffffff) (ffffff) (ffffff) (1e1a1b) (ffffff) ...
â†’ Juste une liste plate de couleurs

APRÃˆS :
(((ffffff ffffff ffffff ffffff) (1e1a1b ffffff 211d1e 141011) ...) ...)
â†’ Structure arborescente visible !


âœ¨ RÃ‰SULTAT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Maintenant, en lisant le fichier texte, vous pouvez :
âœ“ Voir la structure hiÃ©rarchique de l'arbre
âœ“ Identifier les nÅ“uds internes vs les feuilles
âœ“ Comprendre comment l'image est divisÃ©e
âœ“ Correspondre exactement au format du sujet


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
